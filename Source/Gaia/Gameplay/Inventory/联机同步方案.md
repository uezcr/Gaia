# åº“å­˜ç³»ç»Ÿ - è”æœºåŒæ­¥æ–¹æ¡ˆ

## ğŸ“‹ **ç›®å½•**

1. [å½“å‰æ¶æ„åˆ†æ](#å½“å‰æ¶æ„åˆ†æ)
2. [è”æœºéœ€æ±‚](#è”æœºéœ€æ±‚)
3. [ç½‘ç»œåŒæ­¥æ–¹æ¡ˆ](#ç½‘ç»œåŒæ­¥æ–¹æ¡ˆ)
4. [å®ç°ç»†èŠ‚](#å®ç°ç»†èŠ‚)
5. [æ€§èƒ½ä¼˜åŒ–](#æ€§èƒ½ä¼˜åŒ–)
6. [å®‰å…¨è€ƒè™‘](#å®‰å…¨è€ƒè™‘)

---

## ğŸ” **å½“å‰æ¶æ„åˆ†æ**

### ç°æœ‰è®¾è®¡

```cpp
// UGaiaInventorySubsystem - GameInstanceSubsystem
class UGaiaInventorySubsystem : public UGameInstanceSubsystem
{
    TMap<FGuid, FGaiaItemInstance> AllItems;        // æ‰€æœ‰ç‰©å“
    TMap<FGuid, FGaiaContainerInstance> Containers; // æ‰€æœ‰å®¹å™¨
};
```

### æ¶æ„ç‰¹ç‚¹

âœ… **ä¼˜åŠ¿**ï¼š
- é›†ä¸­å¼ç®¡ç†ï¼ˆå•ä¸€æ•°æ®æºï¼‰
- O(1)æŸ¥æ‰¾æ•ˆç‡
- GUIDå”¯ä¸€æ ‡è¯†
- æ¸…æ™°çš„æ•°æ®ç»“æ„

âš ï¸ **è”æœºæŒ‘æˆ˜**ï¼š
- GameInstanceSubsystemæ˜¯å•æœºçš„ï¼Œä¸è·¨æœåŠ¡å™¨
- æ²¡æœ‰ç½‘ç»œå¤åˆ¶æ”¯æŒ
- éœ€è¦æ‰‹åŠ¨å®ç°åŒæ­¥é€»è¾‘

---

## ğŸ¯ **è”æœºéœ€æ±‚**

### åŸºæœ¬éœ€æ±‚

1. **ç©å®¶èƒŒåŒ…åŒæ­¥**
   - ç©å®¶çš„ç‰©å“åœ¨æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¿æŒä¸€è‡´
   - æ”¯æŒç‰©å“çš„å¢åˆ æ”¹æŸ¥

2. **å®¹å™¨äº¤äº’**
   - ç®±å­ã€å‚¨ç‰©æŸœç­‰ä¸–ç•Œå®¹å™¨
   - å¤šç©å®¶åŒæ—¶è®¿é—®åŒä¸€å®¹å™¨

3. **ç‰©å“ç§»åŠ¨**
   - æ‹–æ‹½ç‰©å“
   - å †å ã€æ‹†åˆ†ã€äº¤æ¢
   - è·¨å®¹å™¨ç§»åŠ¨

4. **äº¤æ˜“ç³»ç»Ÿ**
   - ç©å®¶ä¹‹é—´äº¤æ˜“ç‰©å“
   - æ‰è½æ‹¾å–

### ç½‘ç»œæ¨¡å¼

- **Listen Server** - ä¸»æœºç©å®¶ä½œä¸ºæœåŠ¡å™¨
- **Dedicated Server** - ç‹¬ç«‹æœåŠ¡å™¨ï¼ˆæ¨èï¼‰
- **å®¢æˆ·ç«¯é¢„æµ‹** - æå‡å“åº”é€Ÿåº¦

---

## ğŸŒ **ç½‘ç»œåŒæ­¥æ–¹æ¡ˆ**

### æ–¹æ¡ˆAï¼šç»„ä»¶å¤åˆ¶ï¼ˆæ¨èï¼‰â­

#### æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Server (Authority)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ UGaiaInventorySubsystem           â”‚  â”‚
â”‚  â”‚ - AllItems (Master Data)          â”‚  â”‚
â”‚  â”‚ - Containers (Master Data)        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚              â†“ RPC / Replication        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Client                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ UGaiaInventoryComponent (Replicated)â”‚
â”‚  â”‚ - ReplicatedItems                 â”‚  â”‚
â”‚  â”‚ - ReplicatedContainers            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### æ ¸å¿ƒç»„ä»¶

**1. UGaiaInventoryComponent (ActorComponent)**
```cpp
UCLASS(ClassGroup=(Inventory), meta=(BlueprintSpawnableComponent))
class UGaiaInventoryComponent : public UActorComponent
{
    GENERATED_BODY()

public:
    UGaiaInventoryComponent();

    // å¤åˆ¶çš„å®¹å™¨UIDåˆ—è¡¨ï¼ˆç©å®¶æ‹¥æœ‰çš„å®¹å™¨ï¼‰
    UPROPERTY(ReplicatedUsing=OnRep_OwnedContainers)
    TArray<FGuid> OwnedContainers;

    // ç½‘ç»œå¤åˆ¶è®¾ç½®
    virtual void GetLifetimeReplicatedProps(TArray<FLifetimeProperty>& OutLifetimeProps) const override;
    virtual bool ReplicateSubobjects(UActorChannel* Channel, FOutBunch* Bunch, FReplicationFlags* RepFlags) override;

    // RPCå‡½æ•°
    UFUNCTION(Server, Reliable, WithValidation)
    void ServerMoveItem(const FGuid& ItemUID, const FGuid& TargetContainerUID, int32 TargetSlotID, int32 Quantity);

    UFUNCTION(Client, Reliable)
    void ClientReceiveInventoryUpdate(const TArray<FGaiaItemInstance>& Items, const TArray<FGaiaContainerInstance>& Containers);

private:
    UFUNCTION()
    void OnRep_OwnedContainers();
};
```

**2. UGaiaInventorySubsystem (ä¿ç•™ï¼Œä½œä¸ºæœåŠ¡å™¨æƒå¨æ•°æ®)**
```cpp
// æœåŠ¡å™¨ç«¯ä»ä½¿ç”¨Subsystemä½œä¸ºæ•°æ®ä¸­å¿ƒ
// å®¢æˆ·ç«¯é€šè¿‡Componentæ¥æ”¶åŒæ­¥æ•°æ®
```

---

### æ–¹æ¡ˆBï¼šå®Œå…¨RPC

#### ç‰¹ç‚¹
- æ‰€æœ‰æ“ä½œé€šè¿‡RPC
- å®¢æˆ·ç«¯ä¸ä¿å­˜æ•°æ®ï¼Œåªæ˜¾ç¤º
- æœåŠ¡å™¨æƒå¨

#### ä¼˜ç¼ºç‚¹
- âœ… ç®€å•ç›´æ¥
- âœ… æœåŠ¡å™¨æƒå¨ï¼Œå®‰å…¨
- âŒ å»¶è¿Ÿé«˜ï¼Œæ¯æ¬¡æ“ä½œéƒ½éœ€è¦ç­‰å¾…æœåŠ¡å™¨å“åº”
- âŒ ç½‘ç»œæµé‡å¤§

---

### æ–¹æ¡ˆCï¼šæ··åˆæ–¹æ¡ˆï¼ˆæ¨èï¼‰â­â­â­

#### æ ¸å¿ƒæ€è·¯

```
å®¢æˆ·ç«¯æ“ä½œ â†’ æœ¬åœ°é¢„æµ‹ â†’ å‘é€RPC â†’ æœåŠ¡å™¨éªŒè¯ â†’ åŒæ­¥ç»“æœ
     â†“           â†“                            â†“
  ç«‹å³æ˜¾ç¤º   ä¸´æ—¶çŠ¶æ€                    ç¡®è®¤/å›æ»š
```

#### å®ç°æ­¥éª¤

1. **å®¢æˆ·ç«¯å‘èµ·æ“ä½œ**
   - ç©å®¶æ‹–æ‹½ç‰©å“
   - æœ¬åœ°ç«‹å³æ˜¾ç¤ºç§»åŠ¨ï¼ˆé¢„æµ‹ï¼‰
   - æ ‡è®°ä¸º"å¾…ç¡®è®¤"çŠ¶æ€

2. **å‘é€RPCåˆ°æœåŠ¡å™¨**
   ```cpp
   ServerMoveItem(ItemUID, TargetContainer, TargetSlot, Quantity);
   ```

3. **æœåŠ¡å™¨éªŒè¯**
   - æ£€æŸ¥ç‰©å“æ˜¯å¦å­˜åœ¨
   - æ£€æŸ¥æƒé™ï¼ˆæ˜¯å¦æ˜¯ç©å®¶çš„ç‰©å“ï¼‰
   - æ£€æŸ¥å®¹å™¨æ˜¯å¦å…è®¸
   - æ‰§è¡Œç§»åŠ¨

4. **æœåŠ¡å™¨åŒæ­¥ç»“æœ**
   - æˆåŠŸï¼šå¹¿æ’­ç»™ç›¸å…³å®¢æˆ·ç«¯
   - å¤±è´¥ï¼šå‘é€é”™è¯¯ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯å›æ»š

---

## ğŸ› ï¸ **å®ç°ç»†èŠ‚**

### 1. æ•°æ®å¤åˆ¶

#### FGaiaItemInstance ç½‘ç»œä¼˜åŒ–

```cpp
USTRUCT(BlueprintType)
struct FGaiaItemInstance
{
    GENERATED_USTRUCT_BODY()

    // ç½‘ç»œå¤åˆ¶çš„æ ¸å¿ƒå­—æ®µ
    UPROPERTY(Replicated)
    FGuid InstanceUID;

    UPROPERTY(Replicated)
    FName ItemDefinitionID;

    UPROPERTY(Replicated)
    int32 Quantity;

    UPROPERTY(Replicated)
    FGuid CurrentContainerUID;

    UPROPERTY(Replicated)
    int32 CurrentSlotID;

    // ä¸å¤åˆ¶è°ƒè¯•å­—æ®µï¼ˆå®¢æˆ·ç«¯å¯ä»¥æœ¬åœ°ç”Ÿæˆï¼‰
    UPROPERTY(NotReplicated)
    FString DebugDisplayName;
};
```

#### è‡ªå®šä¹‰åºåˆ—åŒ–

```cpp
// ä¼˜åŒ–ç½‘ç»œä¼ è¾“å¤§å°
bool NetSerialize(FArchive& Ar, class UPackageMap* Map, bool& bOutSuccess)
{
    // åªåºåˆ—åŒ–å¿…è¦å­—æ®µ
    Ar << InstanceUID;
    Ar << ItemDefinitionID;
    Ar << Quantity;
    Ar << CurrentContainerUID;
    Ar << CurrentSlotID;
    
    bOutSuccess = true;
    return true;
}
```

---

### 2. RPCè®¾è®¡

#### ç§»åŠ¨ç‰©å“RPC

```cpp
// å®¢æˆ·ç«¯è¯·æ±‚ç§»åŠ¨
UFUNCTION(Server, Reliable, WithValidation)
void ServerMoveItem(
    const FGuid& ItemUID,
    const FGuid& TargetContainerUID,
    int32 TargetSlotID,
    int32 Quantity
);

// å®ç°
void UGaiaInventoryComponent::ServerMoveItem_Implementation(
    const FGuid& ItemUID,
    const FGuid& TargetContainerUID,
    int32 TargetSlotID,
    int32 Quantity)
{
    // 1. æƒé™æ£€æŸ¥
    if (!CanPlayerAccessItem(GetOwner(), ItemUID))
    {
        ClientMoveItemFailed(EMoveItemResult::InvalidTarget, TEXT("æ— æƒé™"));
        return;
    }

    // 2. è°ƒç”¨Subsystemæ‰§è¡Œç§»åŠ¨
    UGaiaInventorySubsystem* InventorySystem = GetGameInstance()->GetSubsystem<UGaiaInventorySubsystem>();
    FMoveItemResult Result = InventorySystem->MoveItem(ItemUID, TargetContainerUID, TargetSlotID, Quantity);

    // 3. åŒæ­¥ç»“æœ
    if (Result.IsSuccess())
    {
        // å¹¿æ’­ç»™ç›¸å…³ç©å®¶
        BroadcastInventoryUpdate();
    }
    else
    {
        // é€šçŸ¥å®¢æˆ·ç«¯å¤±è´¥
        ClientMoveItemFailed(Result.Result, Result.ErrorMessage);
    }
}

// éªŒè¯å‡½æ•°
bool UGaiaInventoryComponent::ServerMoveItem_Validate(
    const FGuid& ItemUID,
    const FGuid& TargetContainerUID,
    int32 TargetSlotID,
    int32 Quantity)
{
    // åŸºæœ¬éªŒè¯ï¼Œé˜²æ­¢ä½œå¼Š
    return Quantity > 0 && Quantity <= 999;
}

// å®¢æˆ·ç«¯æ¥æ”¶å¤±è´¥é€šçŸ¥
UFUNCTION(Client, Reliable)
void ClientMoveItemFailed(EMoveItemResult Result, const FString& ErrorMessage);
```

---

### 3. å®¹å™¨è®¿é—®æƒé™

#### æƒé™ç³»ç»Ÿ

```cpp
enum class EContainerAccessLevel : uint8
{
    Private,        // ç§æœ‰ï¼ˆåªæœ‰æ‰€æœ‰è€…ï¼‰
    Team,          // é˜Ÿä¼
    Public         // å…¬å¼€
};

// æ£€æŸ¥è®¿é—®æƒé™
bool CanPlayerAccessContainer(APlayerController* Player, const FGuid& ContainerUID)
{
    FGaiaContainerInstance Container;
    if (!FindContainerByUID(ContainerUID, Container))
    {
        return false;
    }

    // æ£€æŸ¥æ‰€æœ‰æƒ
    if (Container.OwnerItemUID.IsValid())
    {
        FGaiaItemInstance OwnerItem;
        if (FindItemByUID(Container.OwnerItemUID, OwnerItem))
        {
            // æ£€æŸ¥ç‰©å“æ‰€å±ç©å®¶
            return IsPlayerOwnsItem(Player, OwnerItem.InstanceUID);
        }
    }

    // ä¸–ç•Œå®¹å™¨ï¼ˆç®±å­ç­‰ï¼‰
    // TODO: æ£€æŸ¥ä¸–ç•Œå®¹å™¨çš„è®¿é—®æƒé™
    return true;
}
```

---

### 4. åŒæ­¥ç­–ç•¥

#### æŒ‰éœ€åŒæ­¥ï¼ˆæ¨èï¼‰

```cpp
// åªåŒæ­¥ç©å®¶ç›¸å…³çš„æ•°æ®
void SyncPlayerInventory(APlayerController* Player)
{
    UGaiaInventoryComponent* InventoryComp = Player->FindComponentByClass<UGaiaInventoryComponent>();
    if (!InventoryComp)
        return;

    TArray<FGaiaItemInstance> PlayerItems;
    TArray<FGaiaContainerInstance> PlayerContainers;

    // æ”¶é›†ç©å®¶æ‹¥æœ‰çš„å®¹å™¨
    for (const FGuid& ContainerUID : InventoryComp->OwnedContainers)
    {
        FGaiaContainerInstance Container;
        if (FindContainerByUID(ContainerUID, Container))
        {
            PlayerContainers.Add(Container);

            // æ”¶é›†å®¹å™¨å†…çš„ç‰©å“
            TArray<FGaiaItemInstance> Items = GetItemsInContainer(ContainerUID);
            PlayerItems.Append(Items);
        }
    }

    // å‘é€ç»™å®¢æˆ·ç«¯
    InventoryComp->ClientReceiveInventoryUpdate(PlayerItems, PlayerContainers);
}
```

#### å¢é‡åŒæ­¥

```cpp
// åªåŒæ­¥å˜åŒ–çš„æ•°æ®
struct FInventoryDelta
{
    TArray<FGuid> AddedItems;
    TArray<FGuid> RemovedItems;
    TArray<FGaiaItemInstance> ModifiedItems;
};

UFUNCTION(Client, Reliable)
void ClientReceiveInventoryDelta(const FInventoryDelta& Delta);
```

---

## âš¡ **æ€§èƒ½ä¼˜åŒ–**

### 1. ç½‘ç»œå¸¦å®½ä¼˜åŒ–

#### å‹ç¼©æŠ€æœ¯

```cpp
// ä½¿ç”¨ä½å‹ç¼©
struct FCompressedItemData
{
    uint16 ItemDefIDHash;  // 2å­—èŠ‚ (è€Œä¸æ˜¯FNameçš„å®Œæ•´å­—ç¬¦ä¸²)
    uint8 Quantity;        // 1å­—èŠ‚ (å¦‚æœMaxStackSize < 256)
    uint8 SlotID;          // 1å­—èŠ‚
    // æ€»å…± 4å­—èŠ‚ vs åŸæ¥çš„ ~40å­—èŠ‚
};
```

#### æ‰¹é‡æ›´æ–°

```cpp
// ä¸è¦æ¯æ¬¡æ“ä½œéƒ½RPCï¼Œè€Œæ˜¯æ‰¹é‡å‘é€
TArray<FPendingInventoryOperation> PendingOps;

void FlushPendingOperations()
{
    if (PendingOps.Num() > 0)
    {
        ServerBatchOperations(PendingOps);
        PendingOps.Empty();
    }
}
```

---

### 2. æ›´æ–°é¢‘ç‡æ§åˆ¶

```cpp
// é™åˆ¶åŒæ­¥é¢‘ç‡
float LastSyncTime = 0.f;
const float MinSyncInterval = 0.1f; // æœ€å¤šæ¯0.1ç§’åŒæ­¥ä¸€æ¬¡

void RequestSync()
{
    float CurrentTime = GetWorld()->GetTimeSeconds();
    if (CurrentTime - LastSyncTime >= MinSyncInterval)
    {
        ServerRequestInventoryUpdate();
        LastSyncTime = CurrentTime;
    }
}
```

---

### 3. ç›¸å…³æ€§ä¼˜åŒ–

```cpp
// åªåŒæ­¥ç›¸å…³ç©å®¶
// ä¾‹å¦‚ï¼šæ‰“å¼€åŒä¸€ä¸ªç®±å­çš„ç©å®¶

class UGaiaInventoryComponent : public UActorComponent
{
    virtual bool IsNetRelevantFor(
        const AActor* RealViewer,
        const AActor* ViewTarget,
        const FVector& SrcLocation) const override
    {
        // è‡ªå®šä¹‰ç›¸å…³æ€§é€»è¾‘
        return Super::IsNetRelevantFor(RealViewer, ViewTarget, SrcLocation);
    }
};
```

---

## ğŸ”’ **å®‰å…¨è€ƒè™‘**

### 1. æœåŠ¡å™¨æƒå¨

```cpp
// æ‰€æœ‰é‡è¦æ“ä½œå¿…é¡»åœ¨æœåŠ¡å™¨éªŒè¯
void UGaiaInventoryComponent::ServerMoveItem_Implementation(...)
{
    // âœ… å¥½çš„åšæ³•ï¼šæœåŠ¡å™¨éªŒè¯
    if (!HasAuthority())
    {
        return; // åªåœ¨æœåŠ¡å™¨æ‰§è¡Œ
    }

    // éªŒè¯æ“ä½œåˆæ³•æ€§
    if (!ValidateMoveOperation(...))
    {
        return;
    }

    // æ‰§è¡Œæ“ä½œ
    ExecuteMove(...);
}
```

### 2. é˜²ä½œå¼Š

```cpp
// æ£€æŸ¥æ“ä½œé¢‘ç‡ï¼ˆé˜²æ­¢åˆ·ç‰©å“ï¼‰
TMap<APlayerController*, FAntiCheatData> AntiCheatTracking;

struct FAntiCheatData
{
    int32 OperationCount;
    float WindowStartTime;
};

bool CheckOperationRate(APlayerController* Player)
{
    FAntiCheatData& Data = AntiCheatTracking.FindOrAdd(Player);
    
    float CurrentTime = GetWorld()->GetTimeSeconds();
    if (CurrentTime - Data.WindowStartTime > 1.0f)
    {
        // é‡ç½®çª—å£
        Data.OperationCount = 0;
        Data.WindowStartTime = CurrentTime;
    }

    Data.OperationCount++;
    
    // æœ€å¤šæ¯ç§’20æ¬¡æ“ä½œ
    if (Data.OperationCount > 20)
    {
        UE_LOG(LogGaia, Warning, TEXT("ç©å®¶ %s æ“ä½œé¢‘ç‡å¼‚å¸¸"), *Player->GetName());
        return false;
    }

    return true;
}
```

### 3. æƒé™éªŒè¯

```cpp
// ä¸¥æ ¼çš„æƒé™æ£€æŸ¥
bool ValidateMoveOperation(APlayerController* Player, const FGuid& ItemUID, const FGuid& TargetContainer)
{
    // 1. æ£€æŸ¥ç‰©å“æ‰€æœ‰æƒ
    if (!IsPlayerOwnsItem(Player, ItemUID))
    {
        UE_LOG(LogGaia, Warning, TEXT("ç©å®¶ %s å°è¯•ç§»åŠ¨ä¸å±äºè‡ªå·±çš„ç‰©å“"), *Player->GetName());
        return false;
    }

    // 2. æ£€æŸ¥ç›®æ ‡å®¹å™¨è®¿é—®æƒé™
    if (!CanPlayerAccessContainer(Player, TargetContainer))
    {
        return false;
    }

    // 3. æ£€æŸ¥æ“ä½œåˆç†æ€§ï¼ˆè·ç¦»ã€è§†çº¿ç­‰ï¼‰
    if (!IsContainerInRange(Player, TargetContainer))
    {
        return false;
    }

    return true;
}
```

---

## ğŸ“ **å®ç°æ­¥éª¤ï¼ˆæ¨èè·¯çº¿ï¼‰**

### é˜¶æ®µ1ï¼šåŸºç¡€æ¶æ„ï¼ˆ1-2å‘¨ï¼‰

1. âœ… åˆ›å»º `UGaiaInventoryComponent`
2. âœ… å®ç°åŸºæœ¬çš„ç½‘ç»œå¤åˆ¶
3. âœ… æ·»åŠ  `OwnedContainers` å­—æ®µ
4. âœ… å®ç° `GetLifetimeReplicatedProps`

### é˜¶æ®µ2ï¼šRPCå®ç°ï¼ˆ1å‘¨ï¼‰

5. âœ… å®ç° `ServerMoveItem` RPC
6. âœ… å®ç° `ClientReceiveInventoryUpdate`
7. âœ… æ·»åŠ æƒé™éªŒè¯

### é˜¶æ®µ3ï¼šå®¢æˆ·ç«¯é¢„æµ‹ï¼ˆ1å‘¨ï¼‰

8. âœ… å®ç°æœ¬åœ°é¢„æµ‹ç§»åŠ¨
9. âœ… å®ç°å›æ»šæœºåˆ¶
10. âœ… æ·»åŠ "å¾…ç¡®è®¤"çŠ¶æ€UI

### é˜¶æ®µ4ï¼šä¼˜åŒ–ï¼ˆ1-2å‘¨ï¼‰

11. âœ… å¢é‡åŒæ­¥
12. âœ… ç½‘ç»œå‹ç¼©
13. âœ… é¢‘ç‡é™åˆ¶
14. âœ… é˜²ä½œå¼Šç³»ç»Ÿ

### é˜¶æ®µ5ï¼šæµ‹è¯•ï¼ˆæŒç»­ï¼‰

15. âœ… å•æœºæµ‹è¯•
16. âœ… å±€åŸŸç½‘æµ‹è¯•
17. âœ… é«˜å»¶è¿Ÿæµ‹è¯•
18. âœ… å‹åŠ›æµ‹è¯•

---

## ğŸ¯ **ä¸‹ä¸€æ­¥è®¨è®º**

æˆ‘ä»¬å¯ä»¥è®¨è®ºä»¥ä¸‹æ–¹é¢ï¼š

1. **é€‰æ‹©å“ªä¸ªæ–¹æ¡ˆï¼Ÿ**
   - æ–¹æ¡ˆAï¼šç»„ä»¶å¤åˆ¶
   - æ–¹æ¡ˆCï¼šæ··åˆæ–¹æ¡ˆï¼ˆæ¨èï¼‰

2. **å®¢æˆ·ç«¯é¢„æµ‹**
   - æ˜¯å¦éœ€è¦ï¼Ÿ
   - å¦‚ä½•å®ç°å›æ»šï¼Ÿ

3. **ä¸–ç•Œå®¹å™¨**
   - ç®±å­å¦‚ä½•åŒæ­¥ï¼Ÿ
   - å¤šç©å®¶åŒæ—¶è®¿é—®ï¼Ÿ

4. **äº¤æ˜“ç³»ç»Ÿ**
   - ç©å®¶é—´äº¤æ˜“
   - æ‰è½æ‹¾å–

5. **æ€§èƒ½ç›®æ ‡**
   - æ”¯æŒå¤šå°‘ç©å®¶ï¼Ÿ
   - æ¯ä¸ªç©å®¶å¤šå°‘ç‰©å“ï¼Ÿ

---

**å‡†å¤‡å¥½å¼€å§‹å®ç°è”æœºåŠŸèƒ½äº†å—ï¼Ÿå‘Šè¯‰æˆ‘ä½ çš„æƒ³æ³•å’Œéœ€æ±‚ï¼** ğŸš€

