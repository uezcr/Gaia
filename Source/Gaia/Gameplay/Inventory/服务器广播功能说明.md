# æœåŠ¡å™¨å¹¿æ’­åŠŸèƒ½è¯´æ˜

## ğŸ“‹ **åŠŸèƒ½æ¦‚è¿°**

å®ç°äº†**æ™ºèƒ½å¹¿æ’­ç³»ç»Ÿ**ï¼Œå½“å®¹å™¨å†…å®¹å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè‡ªåŠ¨é€šçŸ¥æ‰€æœ‰ç›¸å…³ç©å®¶ï¼ˆå®¹å™¨æ‰€æœ‰è€…å’Œæ­£åœ¨è®¿é—®çš„ç©å®¶ï¼‰åˆ·æ–°åº“å­˜æ•°æ®ã€‚

---

## ğŸ¯ **è®¾è®¡ç›®æ ‡**

### é—®é¢˜
åœ¨å¤šäººæ¸¸æˆä¸­ï¼Œå½“å®¹å™¨å†…å®¹å‘ç”Ÿå˜åŒ–æ—¶ï¼š
- âŒ å¦‚ä½•é€šçŸ¥æ‰€æœ‰ç›¸å…³ç©å®¶ï¼Ÿ
- âŒ å¦‚ä½•é¿å…é€šçŸ¥æ— å…³ç©å®¶ï¼ˆæµªè´¹å¸¦å®½ï¼‰ï¼Ÿ
- âŒ å¦‚ä½•å¤„ç†ç§æœ‰å®¹å™¨ï¼ˆèƒŒåŒ…ï¼‰å’Œä¸–ç•Œå®¹å™¨ï¼ˆç®±å­ï¼‰ï¼Ÿ

### è§£å†³æ–¹æ¡ˆ
âœ… **ç²¾å‡†å¹¿æ’­**ï¼šåªé€šçŸ¥æ‹¥æœ‰æˆ–æ­£åœ¨è®¿é—®å®¹å™¨çš„ç©å®¶  
âœ… **è‡ªåŠ¨è§¦å‘**ï¼šç‰©å“æ“ä½œåè‡ªåŠ¨å¹¿æ’­  
âœ… **åŒå‘åŒæ­¥**ï¼šæºå®¹å™¨å’Œç›®æ ‡å®¹å™¨éƒ½ä¼šæ›´æ–°  

---

## ğŸ—ï¸ **æ¶æ„è®¾è®¡**

### æ ¸å¿ƒæ•°æ®ç»“æ„

```cpp
// GaiaInventorySubsystem.h

/** å®¹å™¨æ‰€æœ‰è€…æ˜ å°„ï¼ˆç©å®¶ -> æ‹¥æœ‰çš„å®¹å™¨åˆ—è¡¨ï¼‰*/
TMap<TObjectPtr<APlayerController>, TArray<FGuid>> ContainerOwners;

/** ä¸–ç•Œå®¹å™¨è®¿é—®è€…æ˜ å°„ï¼ˆå®¹å™¨UID -> æ­£åœ¨è®¿é—®çš„ç©å®¶ï¼‰*/
TMap<FGuid, TObjectPtr<APlayerController>> WorldContainerAccessors;
```

---

## ğŸ”§ **æ ¸å¿ƒå‡½æ•°**

### 1. BroadcastContainerUpdate - å¹¿æ’­å®¹å™¨æ›´æ–°

```cpp
void UGaiaInventorySubsystem::BroadcastContainerUpdate(const FGuid& ContainerUID)
```

#### åŠŸèƒ½
æ‰¾åˆ°æ‰€æœ‰ä¸å®¹å™¨ç›¸å…³çš„ç©å®¶ï¼Œå¹¶é€šçŸ¥ä»–ä»¬åˆ·æ–°åº“å­˜æ•°æ®ã€‚

#### æ‰§è¡Œæµç¨‹

```
1. åˆ›å»ºç©å®¶é›†åˆï¼ˆä½¿ç”¨ TSet è‡ªåŠ¨å»é‡ï¼‰
   â†“
2. æ·»åŠ å®¹å™¨æ‰€æœ‰è€…
   â”œâ”€ è°ƒç”¨ GetContainerOwners(ContainerUID)
   â””â”€ æ·»åŠ åˆ°é›†åˆ
   â†“
3. æ·»åŠ æ­£åœ¨è®¿é—®çš„ç©å®¶
   â”œâ”€ è°ƒç”¨ GetContainerAccessor(ContainerUID)
   â””â”€ æ·»åŠ åˆ°é›†åˆ
   â†“
4. éå†æ‰€æœ‰ç©å®¶
   â”œâ”€ æŸ¥æ‰¾ RPC Component
   â”œâ”€ è°ƒç”¨ ServerRequestRefreshInventory_Implementation()
   â””â”€ å®¢æˆ·ç«¯æ”¶åˆ°æ›´æ–°
```

#### ç¤ºä¾‹

```cpp
// ç©å®¶ä»ç®±å­æ‹¿äº†ä¸€ä¸ªç‰©å“
InventorySystem->MoveItem(ItemUID, PlayerBackpackUID, SlotID, 1);

// è‡ªåŠ¨å¹¿æ’­ç»™ï¼š
// 1. ç®±å­çš„æ‰€æœ‰è€…ï¼ˆå¦‚æœæœ‰ï¼‰
// 2. æ­£åœ¨è®¿é—®ç®±å­çš„ç©å®¶ï¼ˆå½“å‰ç©å®¶ï¼‰
InventorySystem->BroadcastContainerUpdate(ChestUID);

// ä¹Ÿå¹¿æ’­ç»™ï¼š
// 1. èƒŒåŒ…çš„æ‰€æœ‰è€…ï¼ˆå½“å‰ç©å®¶ï¼‰
InventorySystem->BroadcastContainerUpdate(PlayerBackpackUID);
```

---

### 2. RegisterContainerOwner - æ³¨å†Œå®¹å™¨æ‰€æœ‰è€…

```cpp
void UGaiaInventorySubsystem::RegisterContainerOwner(
    APlayerController* PlayerController, 
    const FGuid& ContainerUID)
```

#### åŠŸèƒ½
å°†å®¹å™¨æ ‡è®°ä¸ºç©å®¶æ‹¥æœ‰ï¼ˆç§æœ‰å®¹å™¨ï¼Œå¦‚èƒŒåŒ…ï¼‰ã€‚

#### ä½¿ç”¨åœºæ™¯

```cpp
// ç©å®¶ç™»å½•æ—¶ï¼Œåˆ›å»ºèƒŒåŒ…
void AYourPlayerController::BeginPlay()
{
    if (HasAuthority())
    {
        UGaiaInventorySubsystem* InventorySystem = GetWorld()->GetSubsystem<UGaiaInventorySubsystem>();
        
        // åˆ›å»ºèƒŒåŒ…
        FGuid BackpackUID = InventorySystem->CreateContainer(TEXT("PlayerBackpack"));
        
        // âœ… æ³¨å†Œä¸ºæ‰€æœ‰è€…
        InventorySystem->RegisterContainerOwner(this, BackpackUID);
        
        // åŒæ—¶åœ¨ RPC Component ä¸­è®°å½•
        UGaiaInventoryRPCComponent* RPCComp = FindComponentByClass<UGaiaInventoryRPCComponent>();
        RPCComp->OwnedContainerUIDs.Add(BackpackUID);
    }
}
```

---

### 3. UnregisterContainerOwner - æ³¨é”€å®¹å™¨æ‰€æœ‰è€…

```cpp
void UGaiaInventorySubsystem::UnregisterContainerOwner(
    APlayerController* PlayerController, 
    const FGuid& ContainerUID)
```

#### åŠŸèƒ½
ç§»é™¤ç©å®¶å¯¹å®¹å™¨çš„æ‰€æœ‰æƒã€‚

#### ä½¿ç”¨åœºæ™¯

```cpp
// ç©å®¶æ–­çº¿æˆ–åˆ é™¤å®¹å™¨æ—¶
void OnPlayerLogout(APlayerController* PC)
{
    UGaiaInventorySubsystem* InventorySystem = GetWorld()->GetSubsystem<UGaiaInventorySubsystem>();
    
    // è·å–ç©å®¶æ‹¥æœ‰çš„æ‰€æœ‰å®¹å™¨
    TArray<FGuid> OwnedContainers = GetPlayerContainers(PC);
    
    for (const FGuid& ContainerUID : OwnedContainers)
    {
        // æ³¨é”€æ‰€æœ‰æƒ
        InventorySystem->UnregisterContainerOwner(PC, ContainerUID);
    }
}
```

---

### 4. GetContainerOwners - è·å–å®¹å™¨æ‰€æœ‰è€…

```cpp
TArray<APlayerController*> UGaiaInventorySubsystem::GetContainerOwners(
    const FGuid& ContainerUID) const
```

#### åŠŸèƒ½
æŸ¥è¯¢å“ªäº›ç©å®¶æ‹¥æœ‰æŒ‡å®šå®¹å™¨ã€‚

#### è¿”å›å€¼
- æ‹¥æœ‰è¯¥å®¹å™¨çš„æ‰€æœ‰ç©å®¶åˆ—è¡¨
- å¦‚æœæ˜¯ä¸–ç•Œå®¹å™¨ï¼ˆæ— æ‰€æœ‰è€…ï¼‰ï¼Œè¿”å›ç©ºæ•°ç»„

#### ç¤ºä¾‹

```cpp
// æ£€æŸ¥è°æ‹¥æœ‰è¿™ä¸ªèƒŒåŒ…
TArray<APlayerController*> Owners = InventorySystem->GetContainerOwners(BackpackUID);

if (Owners.Num() > 0)
{
    UE_LOG(LogGaia, Log, TEXT("èƒŒåŒ…å±äº %s"), *Owners[0]->GetName());
}
else
{
    UE_LOG(LogGaia, Log, TEXT("è¿™æ˜¯ä¸–ç•Œå®¹å™¨ï¼Œæ— æ‰€æœ‰è€…"));
}
```

---

## ğŸ® **å®Œæ•´å·¥ä½œæµç¨‹**

### åœºæ™¯ï¼šç©å®¶Aä»ç®±å­æ‹¿ç‰©å“åˆ°è‡ªå·±èƒŒåŒ…

```cpp
// ========================================
// 1. ç©å®¶A æ‹–æ‹½ç‰©å“
// ========================================

// å®¢æˆ·ç«¯ UI
void OnItemDragged(FGuid ItemUID, FGuid TargetBackpackUID, int32 SlotID)
{
    RPCComponent->RequestMoveItem(ItemUID, TargetBackpackUID, SlotID, 1);
}

// ========================================
// 2. RPC åˆ°æœåŠ¡å™¨
// ========================================

void UGaiaInventoryRPCComponent::ServerMoveItem_Implementation(...)
{
    // æ‰§è¡Œç§»åŠ¨
    FMoveItemResult Result = InventorySystem->MoveItem(ItemUID, TargetBackpackUID, SlotID, 1);
    
    if (Result.IsSuccess())
    {
        // âœ… å¹¿æ’­ç›®æ ‡å®¹å™¨æ›´æ–°ï¼ˆç©å®¶èƒŒåŒ…ï¼‰
        InventorySystem->BroadcastContainerUpdate(TargetBackpackUID);
        
        // âœ… å¹¿æ’­æºå®¹å™¨æ›´æ–°ï¼ˆç®±å­ï¼‰
        if (SourceContainerUID.IsValid() && SourceContainerUID != TargetBackpackUID)
        {
            InventorySystem->BroadcastContainerUpdate(SourceContainerUID);
        }
    }
}

// ========================================
// 3. å¹¿æ’­ç›®æ ‡å®¹å™¨ï¼ˆèƒŒåŒ…ï¼‰
// ========================================

void UGaiaInventorySubsystem::BroadcastContainerUpdate(TargetBackpackUID)
{
    TSet<APlayerController*> PlayersToNotify;
    
    // æ‰¾åˆ°èƒŒåŒ…æ‰€æœ‰è€…
    TArray<APlayerController*> Owners = GetContainerOwners(TargetBackpackUID);
    // Owners = [PlayerA]
    
    PlayersToNotify.Add(PlayerA);
    
    // æ‰¾åˆ°æ­£åœ¨è®¿é—®èƒŒåŒ…çš„ç©å®¶
    APlayerController* Accessor = GetContainerAccessor(TargetBackpackUID);
    // Accessor = nullptrï¼ˆèƒŒåŒ…ä¸æ˜¯ä¸–ç•Œå®¹å™¨ï¼‰
    
    // é€šçŸ¥ PlayerA åˆ·æ–°
    PlayerA->RPCComponent->ServerRequestRefreshInventory_Implementation();
    // PlayerA çš„å®¢æˆ·ç«¯æ”¶åˆ°æ›´æ–°ï¼ŒUI åˆ·æ–°
}

// ========================================
// 4. å¹¿æ’­æºå®¹å™¨ï¼ˆç®±å­ï¼‰
// ========================================

void UGaiaInventorySubsystem::BroadcastContainerUpdate(ChestUID)
{
    TSet<APlayerController*> PlayersToNotify;
    
    // æ‰¾åˆ°ç®±å­æ‰€æœ‰è€…
    TArray<APlayerController*> Owners = GetContainerOwners(ChestUID);
    // Owners = []ï¼ˆç®±å­æ˜¯ä¸–ç•Œå®¹å™¨ï¼Œæ— æ‰€æœ‰è€…ï¼‰
    
    // æ‰¾åˆ°æ­£åœ¨è®¿é—®ç®±å­çš„ç©å®¶
    APlayerController* Accessor = GetContainerAccessor(ChestUID);
    // Accessor = PlayerAï¼ˆå½“å‰æ­£åœ¨è®¿é—®ï¼‰
    
    PlayersToNotify.Add(PlayerA);
    
    // é€šçŸ¥ PlayerA åˆ·æ–°
    PlayerA->RPCComponent->ServerRequestRefreshInventory_Implementation();
    // PlayerA çš„å®¢æˆ·ç«¯å†æ¬¡æ”¶åˆ°æ›´æ–°ï¼Œç®±å­UIåˆ·æ–°
}
```

---

## ğŸ“Š **æ•°æ®æµå‘å›¾**

```
ç©å®¶A æ‹–æ‹½ç‰©å“
    â†“
RequestMoveItem (RPC)
    â†“
ServerMoveItem_Implementation (æœåŠ¡å™¨)
    â†“
InventorySystem->MoveItem()
    â†“
æˆåŠŸç§»åŠ¨
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       â”‚                       â”‚
BroadcastContainerUpdate  BroadcastContainerUpdate
(ç›®æ ‡å®¹å™¨ï¼šèƒŒåŒ…)          (æºå®¹å™¨ï¼šç®±å­)
    â†“                       â†“
æ‰¾åˆ°æ‰€æœ‰ç›¸å…³ç©å®¶        æ‰¾åˆ°æ‰€æœ‰ç›¸å…³ç©å®¶
- æ‰€æœ‰è€…ï¼šPlayerA       - è®¿é—®è€…ï¼šPlayerA
    â†“                       â†“
é€šçŸ¥ PlayerA åˆ·æ–°       é€šçŸ¥ PlayerA åˆ·æ–°
    â†“                       â†“
ClientReceiveInventoryData (RPC)
    â†“
PlayerA çš„ UI æ›´æ–°
```

---

## ğŸ”„ **è‡ªåŠ¨å¹¿æ’­åœºæ™¯**

### 1. ç§»åŠ¨ç‰©å“

```cpp
void ServerMoveItem_Implementation(...)
{
    if (InventorySystem->MoveItem(...))
    {
        // âœ… è‡ªåŠ¨å¹¿æ’­ç›®æ ‡å®¹å™¨
        InventorySystem->BroadcastContainerUpdate(TargetContainerUID);
        
        // âœ… è‡ªåŠ¨å¹¿æ’­æºå®¹å™¨ï¼ˆå¦‚æœä¸åŒï¼‰
        if (SourceContainerUID != TargetContainerUID)
        {
            InventorySystem->BroadcastContainerUpdate(SourceContainerUID);
        }
    }
}
```

### 2. æ·»åŠ ç‰©å“

```cpp
void ServerAddItem_Implementation(...)
{
    if (InventorySystem->AddItemToContainer(Item, ContainerUID))
    {
        // âœ… è‡ªåŠ¨å¹¿æ’­å®¹å™¨æ›´æ–°
        InventorySystem->BroadcastContainerUpdate(ContainerUID);
    }
}
```

### 3. ç§»é™¤ç‰©å“

```cpp
void ServerRemoveItem_Implementation(...)
{
    // å…ˆè®°å½•æºå®¹å™¨
    FGuid SourceContainerUID = Item.CurrentContainerUID;
    
    if (InventorySystem->RemoveItemFromContainer(ItemUID))
    {
        // âœ… è‡ªåŠ¨å¹¿æ’­æºå®¹å™¨æ›´æ–°
        InventorySystem->BroadcastContainerUpdate(SourceContainerUID);
    }
}
```

### 4. é”€æ¯ç‰©å“

```cpp
void ServerDestroyItem_Implementation(...)
{
    // å…ˆè®°å½•æºå®¹å™¨
    FGuid SourceContainerUID = Item.CurrentContainerUID;
    
    if (InventorySystem->DestroyItem(ItemUID))
    {
        // âœ… è‡ªåŠ¨å¹¿æ’­æºå®¹å™¨æ›´æ–°
        InventorySystem->BroadcastContainerUpdate(SourceContainerUID);
    }
}
```

---

## âš¡ **æ€§èƒ½ä¼˜åŒ–**

### 1. ä½¿ç”¨ TSet å»é‡

```cpp
void BroadcastContainerUpdate(const FGuid& ContainerUID)
{
    // âœ… ä½¿ç”¨ TSet è‡ªåŠ¨å»é‡
    TSet<APlayerController*> PlayersToNotify;
    
    // æ·»åŠ æ‰€æœ‰è€…
    for (APlayerController* Owner : GetContainerOwners(ContainerUID))
    {
        PlayersToNotify.Add(Owner); // è‡ªåŠ¨å»é‡
    }
    
    // æ·»åŠ è®¿é—®è€…
    if (APlayerController* Accessor = GetContainerAccessor(ContainerUID))
    {
        PlayersToNotify.Add(Accessor); // å¦‚æœå·²å­˜åœ¨ï¼Œä¸ä¼šé‡å¤æ·»åŠ 
    }
}
```

### 2. ç²¾å‡†é€šçŸ¥

```cpp
// âŒ é”™è¯¯åšæ³•ï¼šé€šçŸ¥æ‰€æœ‰ç©å®¶
for (APlayerController* PC : AllPlayers)
{
    PC->RefreshInventory(); // æµªè´¹å¸¦å®½ï¼
}

// âœ… æ­£ç¡®åšæ³•ï¼šåªé€šçŸ¥ç›¸å…³ç©å®¶
TArray<APlayerController*> Owners = GetContainerOwners(ContainerUID);
APlayerController* Accessor = GetContainerAccessor(ContainerUID);

// åªé€šçŸ¥è¿™äº›ç©å®¶
```

### 3. æ—¥å¿—çº§åˆ«æ§åˆ¶

```cpp
// ä½¿ç”¨ Verbose çº§åˆ«ï¼Œé¿å…åˆ·å±
UE_LOG(LogGaia, Verbose, TEXT("[ç½‘ç»œå¹¿æ’­] å®¹å™¨ %s å·²é€šçŸ¥ %d ä¸ªç©å®¶"), 
    *ContainerUID.ToString(), PlayersToNotify.Num());
```

---

## ğŸ¯ **ä½¿ç”¨å»ºè®®**

### 1. ç©å®¶ç™»å½•æ—¶æ³¨å†ŒèƒŒåŒ…

```cpp
void AYourPlayerController::BeginPlay()
{
    if (HasAuthority())
    {
        UGaiaInventorySubsystem* InventorySystem = GetWorld()->GetSubsystem<UGaiaInventorySubsystem>();
        UGaiaInventoryRPCComponent* RPCComp = FindComponentByClass<UGaiaInventoryRPCComponent>();
        
        // åˆ›å»ºå¹¶æ³¨å†ŒèƒŒåŒ…
        FGuid BackpackUID = InventorySystem->CreateContainer(TEXT("PlayerBackpack"));
        InventorySystem->RegisterContainerOwner(this, BackpackUID);
        RPCComp->OwnedContainerUIDs.Add(BackpackUID);
        
        // åˆ›å»ºå¹¶æ³¨å†Œè£…å¤‡æ 
        FGuid EquipmentUID = InventorySystem->CreateContainer(TEXT("PlayerEquipment"));
        InventorySystem->RegisterContainerOwner(this, EquipmentUID);
        RPCComp->OwnedContainerUIDs.Add(EquipmentUID);
        
        // åŒæ­¥ç»™å®¢æˆ·ç«¯
        RPCComp->ServerRequestRefreshInventory_Implementation();
    }
}
```

### 2. ç©å®¶æ–­çº¿æ—¶æ¸…ç†

```cpp
void AYourGameMode::OnPlayerDisconnected(APlayerController* PC)
{
    UGaiaInventorySubsystem* InventorySystem = GetWorld()->GetSubsystem<UGaiaInventorySubsystem>();
    UGaiaInventoryRPCComponent* RPCComp = PC->FindComponentByClass<UGaiaInventoryRPCComponent>();
    
    // æ³¨é”€æ‰€æœ‰æ‹¥æœ‰çš„å®¹å™¨
    for (const FGuid& ContainerUID : RPCComp->OwnedContainerUIDs)
    {
        InventorySystem->UnregisterContainerOwner(PC, ContainerUID);
    }
    
    // å…³é—­æ‰€æœ‰æ‰“å¼€çš„ä¸–ç•Œå®¹å™¨
    for (const FGuid& ContainerUID : RPCComp->OpenWorldContainerUIDs)
    {
        InventorySystem->CloseWorldContainer(PC, ContainerUID);
    }
}
```

---

## ğŸ“ **ä»£ç æ–‡ä»¶å˜æ›´**

### ä¿®æ”¹çš„æ–‡ä»¶

1. **GaiaInventorySubsystem.h**
   - âœ… æ·»åŠ  `ContainerOwners` æˆå‘˜å˜é‡
   - âœ… æ·»åŠ  4 ä¸ªæ–°å‡½æ•°

2. **GaiaInventorySubsystem.cpp**
   - âœ… å®ç° `BroadcastContainerUpdate`
   - âœ… å®ç° `GetContainerOwners`
   - âœ… å®ç° `RegisterContainerOwner`
   - âœ… å®ç° `UnregisterContainerOwner`
   - âœ… æ·»åŠ  `#include "GaiaInventoryRPCComponent.h"`

3. **GaiaInventoryRPCComponent.cpp**
   - âœ… `ServerMoveItem` ä¸­è°ƒç”¨å¹¿æ’­
   - âœ… `ServerAddItem` ä¸­è°ƒç”¨å¹¿æ’­
   - âœ… `ServerRemoveItem` ä¸­è°ƒç”¨å¹¿æ’­
   - âœ… `ServerDestroyItem` ä¸­è°ƒç”¨å¹¿æ’­

---

## âœ… **ä¼˜åŠ¿**

1. **æ™ºèƒ½å¹¿æ’­**
   - åªé€šçŸ¥ç›¸å…³ç©å®¶
   - è‡ªåŠ¨å»é‡
   - èŠ‚çœå¸¦å®½

2. **åŒå‘åŒæ­¥**
   - æºå®¹å™¨å’Œç›®æ ‡å®¹å™¨éƒ½æ›´æ–°
   - æ‰€æœ‰ç›¸å…³ç©å®¶éƒ½èƒ½çœ‹åˆ°å˜åŒ–

3. **æ˜“äºä½¿ç”¨**
   - è‡ªåŠ¨è§¦å‘ï¼Œæ— éœ€æ‰‹åŠ¨è°ƒç”¨
   - é€æ˜çš„ç½‘ç»œåŒæ­¥

4. **å¯æ‰©å±•**
   - å¯ä»¥è½»æ¾æ·»åŠ æ›´å¤šå¹¿æ’­æ¡ä»¶
   - æ”¯æŒæœªæ¥çš„é˜Ÿä¼å…±äº«åŠŸèƒ½

---

## ğŸš€ **æœªæ¥æ‰©å±•**

### å¯é€‰åŠŸèƒ½

1. **é˜Ÿä¼å…±äº«å®¹å™¨**
   ```cpp
   TArray<APlayerController*> GetContainerAccessors(const FGuid& ContainerUID)
   {
       TArray<APlayerController*> Accessors;
       
       // å•äººè®¿é—®
       if (APlayerController* Accessor = GetContainerAccessor(ContainerUID))
       {
           Accessors.Add(Accessor);
       }
       
       // é˜Ÿå‹è®¿é—®ï¼ˆæœªæ¥ï¼‰
       // ...
       
       return Accessors;
   }
   ```

2. **å¢é‡å¹¿æ’­**
   ```cpp
   void BroadcastItemChange(const FGuid& ItemUID, const FGuid& ContainerUID)
   {
       // åªå¹¿æ’­å•ä¸ªç‰©å“çš„å˜åŒ–ï¼Œè€Œä¸æ˜¯æ•´ä¸ªå®¹å™¨
   }
   ```

---

## ğŸ¯ **æ€»ç»“**

âœ… **åŠŸèƒ½å®Œæ•´**ï¼šè‡ªåŠ¨å¹¿æ’­å®¹å™¨æ›´æ–°  
âœ… **æ€§èƒ½ä¼˜åŒ–**ï¼šç²¾å‡†é€šçŸ¥ï¼Œè‡ªåŠ¨å»é‡  
âœ… **æ˜“äºé›†æˆ**ï¼šè‡ªåŠ¨è§¦å‘ï¼Œæ— éœ€æ‰‹åŠ¨è°ƒç”¨  
âœ… **å¯æ‰©å±•**ï¼šæ”¯æŒæœªæ¥åŠŸèƒ½æ‰©å±•  

**ç°åœ¨ä½ çš„å¤šäººæ¸¸æˆåº“å­˜ç³»ç»Ÿæ”¯æŒæ™ºèƒ½å¹¿æ’­äº†ï¼** ğŸ‰

