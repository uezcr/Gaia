# ç´§æ€¥ä¿®å¤æ¸…å•

> ä¿®å¤ "æ— æ³•è·å–PrimaryGameLayout" é—®é¢˜

---

## âœ… æˆ‘åˆšåˆšä¿®å¤äº†ä»€ä¹ˆ

### 1. ä¿®æ”¹äº† Config/DefaultGame.ini

**é—®é¢˜ï¼š** `DefaultUIPolicyClass` é…ç½®åœ¨é”™è¯¯çš„sectionä¸‹

**ä¿®å¤å‰ï¼š**
```ini
[/Script/GaiaGame.GaiaUIManagerSubsystem]
DefaultUIPolicyClass=/Game/UI/BP_GaiaUIPolicy.BP_GaiaUIPolicy_C
```

**ä¿®å¤åï¼š**
```ini
[/Script/CommonGame.GameUIManagerSubsystem]  â­ ä¿®æ”¹äº†è¿™é‡Œ
DefaultUIPolicyClass=/Game/UI/BP_GaiaUIPolicy.BP_GaiaUIPolicy_C

[/Script/GaiaGame.GaiaUIManagerSubsystem]
ContainerWindowClass=/Game/UI/WBP_ContainerWindow.WBP_ContainerWindow_C
```

### 2. æ·»åŠ äº† ShouldCreateSubsystem è¦†ç›–

**é—®é¢˜ï¼š** GaiaUIManagerSubsystemå¯èƒ½æ²¡æœ‰è¢«åˆ›å»º

**ä¿®å¤ï¼š** åœ¨ `GaiaUIManagerSubsystem.h/.cpp` ä¸­æ·»åŠ äº†ï¼š

```cpp
virtual bool ShouldCreateSubsystem(UObject* Outer) const override;
```

---

## ğŸ”§ ä½ ç°åœ¨éœ€è¦åšçš„

### æ­¥éª¤1ï¼šé‡æ–°ç¼–è¯‘C++ä»£ç  â­â­â­

1. **å…³é—­UEç¼–è¾‘å™¨**
2. **åœ¨VS/Riderä¸­é‡æ–°ç¼–è¯‘é¡¹ç›®**
3. **é‡æ–°æ‰“å¼€UEç¼–è¾‘å™¨**

### æ­¥éª¤2ï¼šé…ç½®BP_GaiaUIPolicy â­â­â­

1. æ‰“å¼€ `Content/UI/BP_GaiaUIPolicy`
2. Detailsé¢æ¿ â†’ æ‰¾åˆ° **Layout Class** å±æ€§
3. è®¾ç½®ä¸ºï¼š`WBP_GaiaPrimaryGameLayout`
4. **ç¼–è¯‘å¹¶ä¿å­˜**

### æ­¥éª¤3ï¼šé‡å¯ç¼–è¾‘å™¨

é…ç½®ä¿®æ”¹åå¿…é¡»é‡å¯ï¼

### æ­¥éª¤4ï¼šæµ‹è¯•

è¿è¡ŒPIEï¼ŒæŸ¥çœ‹æ—¥å¿—ã€‚

---

## âœ… é¢„æœŸçš„æ­£ç¡®æ—¥å¿—

```
LogCommonGame: Log: AddLocalPlayer: Set GaiaLocalPlayer_0 to Primary Player
LogGaia: Log: [Gaia UIç®¡ç†å™¨] åˆå§‹åŒ–
LogGaia: Log: [UI Policy] âœ… ç©å®¶å¸ƒå±€å·²æ·»åŠ åˆ°Viewport: Player=GaiaLocalPlayer_0, Layout=WBP_GaiaPrimaryGameLayout_C_0
LogGaia: Log: [Gaia UI] æ‰“å¼€å®¹å™¨çª—å£: [å®¹å™¨GUID]
```

---

## âŒ å¦‚æœè¿˜æ˜¯å¤±è´¥

ä½¿ç”¨è¯Šæ–­å·¥å…·ï¼ˆè§ `UIè¯Šæ–­å·¥å…·.md`ï¼‰ï¼ŒæŠŠè¯Šæ–­æ—¥å¿—å‘ç»™æˆ‘ï¼š

```cpp
// åœ¨PlayerControlleræˆ–æµ‹è¯•Actorçš„BeginPlayä¸­æ·»åŠ 
DiagnoseUISystem();  // å‡½æ•°ä»£ç åœ¨ UIè¯Šæ–­å·¥å…·.md
```

å‘Šè¯‰æˆ‘åœ¨å“ªä¸€æ­¥å¤±è´¥äº†ï¼ˆ[1/7] ~ [7/7]ï¼‰ã€‚

---

## ğŸ“‹ å®Œæ•´é…ç½®æ£€æŸ¥

### Config/DefaultEngine.ini
```ini
[/Script/EngineSettings.GameMapsSettings]
GameInstanceClass=/Script/GaiaGame.GaiaGameInstance  âœ…

[/Script/Engine.Engine]
GameViewportClientClassName=/Script/CommonUI.CommonGameViewportClient  âœ…
LocalPlayerClassName=/Script/GaiaGame.GaiaLocalPlayer  âœ…
```

### Config/DefaultGame.ini
```ini
[/Script/CommonGame.GameUIManagerSubsystem]  â­ æ³¨æ„sectionåç§°
DefaultUIPolicyClass=/Game/UI/BP_GaiaUIPolicy.BP_GaiaUIPolicy_C
```

### BP_GaiaUIPolicyï¼ˆè“å›¾é…ç½®ï¼‰
- Layout Class = `WBP_GaiaPrimaryGameLayout`  â­â­â­

---

**ç°åœ¨å»ç¼–è¯‘å’Œé…ç½®å§ï¼**


