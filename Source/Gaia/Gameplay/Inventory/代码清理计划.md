# 代码清理计划

## 一、需要清理的内容

### 1. 调试日志清理
**位置**: `GaiaInventorySubsystem.cpp`

需要清理的过度详细的 Warning 级别日志（保留 Error 和关键 Log）：
- ✅ `[交换检查] ✅ 同容器内交换，允许` → 降级为 Log 或移除
- ✅ `[容器内移动] ✅ 目标槽位为空，执行移动` → 降级为 Log
- ✅ `[目标槽位有物品] ✅/❌` 系列 → 降级为 Log
- ✅ `[网络广播] ⭐ 容器 %s 开始通知` → 降级为 Log
- ❌ 保留所有 Error 级别日志

**建议日志级别**：
- `Error`: 错误情况（保留）
- `Warning`: 需要注意但不是错误的情况（如权限拒绝、操作失败但有明确原因）
- `Log`: 正常流程日志（成功的操作）
- `Verbose`: 详细调试信息（可在开发时启用）

### 2. TODO 注释清理
**需要处理的 TODO**：

#### `GaiaInventorySubsystem.cpp`
- **行 402**: `// TODO: 检查堆叠逻辑（如果物品可堆叠，尝试合并到现有堆）`
  - 状态：❓ 需要确认是否需要实现
  - 建议：如果不需要自动堆叠，删除；如果需要，创建 Issue 追踪

- **行 2550**: `// TODO: 添加游离物品的权限检查（例如：检查物品是否在玩家附近）`
  - 状态：🔮 未来功能
  - 建议：保留或移到文档中

#### `GaiaInventoryRPCComponent.cpp`
- **行 563**: `// TODO: 显示成功提示`
  - 状态：❓ UI功能
  - 建议：移到 UI 层处理，删除此 TODO

#### `GaiaInventoryTypes.cpp`
- **行 3**: `// TODO: 在这里添加结构体成员函数实现`
  - 状态：✅ 无需添加
  - 建议：删除

### 3. 无用代码清理

#### `GaiaInventoryTestHelper.h`
- **行 52**: `* 测试物品删除和索引重建（旧架构，已废弃）`
  - 建议：删除已废弃的测试函数

### 4. 代码优化

#### 日志宏定义
建议添加条件编译的详细日志宏：
```cpp
// 仅在开发模式下启用详细日志
#if UE_BUILD_DEVELOPMENT || UE_BUILD_DEBUG
	#define GAIA_INVENTORY_VERBOSE_LOG(Format, ...) UE_LOG(LogGaia, Verbose, Format, ##__VA_ARGS__)
#else
	#define GAIA_INVENTORY_VERBOSE_LOG(Format, ...)
#endif
```

## 二、清理优先级

### 🔴 高优先级（立即清理）
1. 删除无用 TODO 注释
2. 删除已废弃函数注释
3. 清理过度详细的 Warning 日志

### 🟡 中优先级（建议清理）
1. 优化日志级别（Warning → Log）
2. 添加条件编译的详细日志宏
3. 统一日志格式

### 🟢 低优先级（可选）
1. 重构长函数
2. 提取魔法数字为常量
3. 添加更多注释说明

## 三、清理后效果

### 日志输出优化
**之前（过多 Warning）**：
```
LogGaia: Warning: [交换检查] ✅ 同容器内交换，允许
LogGaia: Warning: [容器内移动] ✅ 目标槽位为空，执行移动
LogGaia: Warning: [目标槽位有物品] ✅ 成功放入目标容器
```

**之后（清晰简洁）**：
```
LogGaia: 容器内移动成功: ItemUID -> 槽位 3
LogGaia: 物品放入容器成功: ItemUID -> ContainerUID
LogGaia: Error: 无法交换物品: 会造成容器循环引用
```

### 代码可读性
- ✅ 移除无用 TODO，减少干扰
- ✅ 保留有意义的注释
- ✅ 统一日志风格

## 四、执行步骤

1. **备份当前代码**（已完成 - Git commit）
2. **清理 TODO 注释**
3. **优化日志级别**
4. **删除已废弃代码**
5. **测试验证**
6. **提交清理后的代码**

